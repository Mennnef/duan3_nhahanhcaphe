<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Font-Awesome -->
    <script src="https://kit.fontawesome.com/c8e4d183c2.js" crossorigin="anonymous"></script>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180"
        href="../images/Icons/logo/app-icon.png">
    <link rel="icon" type="image/png" sizes="32x32"
        href="../images/Icons/logo/appicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16"
        href="../images/Icons/logo/appicon-16x16.png">
    <link rel="manifest" href="../Json/manifest.json">
    <link rel="mask-icon" href="../images/Icons/logo/safari-pinned-tab.svg"
        color="#5bbad5">
    <link rel="shortcut icon" href="../images/Icons/logo/appicon.ico">
    <meta name="msapplication-config"
        content="https://yevgenysim-turkey.github.io/touche/assets/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Libs CSS -->
    <link rel="stylesheet" href="../CSS/main_libs.css" />

    <!-- Theme CSS -->
    <link rel="stylesheet" href="../CSS/main_theme.css" />

    <!-- Libs CSS -->
    <link rel="stylesheet" href="../CSS/cart_libs.css" />

    <!-- Theme CSS -->
    <link rel="stylesheet" href="https://yevgenysim-turkey.github.io/shopper/assets/css/theme.bundle.css" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">

    <!-- Map -->
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' />

    <style>
        .navbar-dark .navbar-nav .nav-link:focus, .navbar-dark .navbar-nav .nav-link:hover {
            color: #f5a637;
        }

        footer p,
        footer li,
        footer .text-xs,
        footer .font-serif {
            color: #6c757d;
        }

        .text-primary,
        .navbar-light .navbar-nav .nav-link:focus,
        .navbar-light .navbar-nav .nav-link:hover,
        footer a {
            color: #f5a637 !important;
        }

        footer a {
            text-decoration: underline;
        }

        .search-box {
            width: 100%;
            position: relative;
            display: flex;
        }

        .search-input {
            width: 100%;
            height: 40px;
            padding: 10px;
            border: 4px solid #111d5e;
            border-radius: 10px 0 0 10px;
            border-right: none;
            outline: none;
            font-size: 18px;
            color: #000;
            background: none;
        }

        .search-button {
            text-align: center;
            height: 40px;
            width: 40px;
            outline: none;
            cursor: pointer;
            border: 4px solid #111d5e;
            border-radius: 0 10px 10px 0;
            border-left: none;
            background: none;
            font-size: 18px;
            border-left: 4px solid #111d5e;
        }

        #filterNav .nav-item .nav-link {
            font-weight: 800;
        }

        .swiper {
            width: 100%;
        }



        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .swiper-slide:hover {
            cursor: grab;
        }

        .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .offcanvas {
            transition: transform .3s ease-in-out !important;
        }

        .dropdown-toggle:after {
            content: "" !important;
            border: 0 !important;
        }
    </style>

    <!-- Title -->
    <title>CafÃ© &amp; Restaurant</title>
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-dark navbar-expand-lg navbar-togglable fixed-top">
        <div class="container">

            <!-- Navbar brand (mobile) -->
            <a class="navbar-brand d-lg-none" href="/index">Logo</a>

            <!-- Navbar toggler -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navbar collapse -->
            <div class="collapse navbar-collapse" id="navbarCollapse">

                <!-- Navbar nav -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link " href="#">About
                            Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="/menu">Menu</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="#">Reservation</a>
                    </li>
                </ul>

                <!-- Navbar brand -->
                <a class="navbar-brand d-none d-lg-flex mx-lg-auto" href="/index">
                    Logo
                </a>

                <!-- Navbar nav -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link " href="#">Gallery</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="#">Contact</a>
                    </li>
                    <li class="dropdown text-end nav-item">
                        <a href="" class="nav-link d-flex d-block link-body-emphasis text-decoration-none dropdown-toggle show" data-bs-toggle="dropdown" aria-expanded="true">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                                 style="
                                                    width: 14px;
                                                    height: auto;
                                                "><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                <path
                                        d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z">
                                </path>
                            </svg>
                        </a>
                        <!-- function -->
                        <ul class="dropdown-menu text-small" data-popper-placement="bottom-start" style="padding: 4px 0; left: 16px; position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate(0px, 34px);">
                            <li><a class="dropdown-item" href="#">Settings</a></li>
                            <li><a class="dropdown-item" href="profile-page.html">Profile</a></li>
                            <li><a class="dropdown-item" href="/dashboard" sec:authorize="hasRole('ROLE_ADMIN')">DashBoard</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" id="logout-link" href="#" th:href="@{/logout}">Sign out</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="#modalShoppingCart" class="nav-link d-flex" style="padding-left: 0;"
                            data-bs-toggle="offcanvas">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"
                                style="
                                                    width: 18px;
                                                    height: auto;
                                                "><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                <path
                                    d="M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z">
                                </path>
                            </svg>
                        </a>
                    </li>
                </ul>

            </div>
        </div>
    </nav>

    <!-- HEADER -->
    <header data-jarallax data-speed=".8"
        style="height: 64vh;background-image: url(https://yevgenysim-turkey.github.io/touche/assets/img/23.jpg);">
        <div class="pt-10 pb-8 pt-md-15 pb-md-13 bg-black-50" style="height: 100%;">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-12 col-md-8 col-lg-6 text-center">

                        <!-- Heading -->
                        <h1 class="display-6 fw-bold text-white">
                            Shopping Cart
                        </h1>

                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- CONTENT -->
    <section class="pt-7 pb-12">
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-7">

                    <!-- List group -->
                    <ul class="list-group list-group-lg list-group-flush-x mb-6">
                        <li class="list-group-item" th:each="sp : ${listSP}">
                            <div class="row align-items-center">
                                <div class="col-3">

                                    <!-- Image -->
                                    <a href="product.html">
                                        <img src="#"  alt="..." class="img-fluid"
                                             th:src="@{../images/} + ${sp.products.category} + '/' + ${sp.products.season} + '/' + ${sp.products.country} + '/' + ${sp.products.image}">
                                    </a>

                                </div>
                                <div class="col">

                                    <!-- Title -->
                                    <div class="d-flex mb-2 fw-bold">
                                        <a class="text-body" href="product.html" th:text="${sp.products.name}">Deep fried spring rolls</a> <span
                                            class="ms-auto" th:text="${sp.products.price}">$40.00</span>
                                    </div>

                                    <!-- Text -->
                                    <p class="mb-7 fs-sm text-muted">
                                        Category: <span th:text="${sp.products.category}"></span> <br>
                                        Season: <span th:text="${sp.products.season}"></span>
                                    </p>

                                    <!--Footer -->
                                    <div class="d-flex align-items-center">

                                        <!-- Select -->
                                        <select class="form-select form-select-xxs w-auto">
                                            <option value="1" th:text="${sp.quantity}">1</option>
                                        </select>

                                        <!-- Remove -->
                                        <a class="fs-xs text-gray-400 ms-auto" th:href="@{/remove-products(id=${sp.id})}" href="#">
                                            <i class="fe fe-x"></i> Remove
                                        </a>

                                    </div>

                                </div>
                            </div>
                        </li>
                    </ul>

                    <!-- Footer -->
                    <div class="row align-items-end justify-content-between mb-10 mb-md-0">
                        <div class="col-12 col-md-7">

                            <!-- Coupon -->
                            <form class="mb-7 mb-md-0">
                                <label class="form-label fs-sm fw-bold" for="cartCouponCode">
                                    Coupon code:
                                </label>
                                <div class="row row gx-5">
                                    <div class="col">

                                        <!-- Input -->
                                        <input class="form-control form-control-sm" id="cartCouponCode" type="text"
                                            placeholder="Enter coupon code*">

                                    </div>
                                    <div class="col-auto">

                                        <!-- Button -->
                                        <button class="btn btn-sm btn-dark" type="submit">
                                            Apply
                                        </button>

                                    </div>
                                </div>
                            </form>

                        </div>
                        <div class="col-12 col-md-auto">

                            <!-- Button -->
                            <button class="btn btn-sm btn-outline-dark">Update Cart</button>

                        </div>
                    </div>

                </div>
                <div class="col-12 col-md-5 col-lg-4 offset-lg-1">

                    <!-- Total -->
                    <div class="card mb-7 bg-light">
                        <div class="card-body">
                            <ul class="list-group list-group-sm list-group-flush-y list-group-flush-x">
                                <li class="list-group-item d-flex">
                                    <span>Subtotal</span> <span class="ms-auto fs-sm" th:text="'$' + ${subtotal}">$89.00</span>
                                </li>
                                <li class="list-group-item d-flex">
                                    <span>Tax</span> <span class="ms-auto fs-sm">$00.00</span>
                                </li>
                                <li class="list-group-item d-flex fs-lg fw-bold">
                                    <span>Total</span> <span class="ms-auto fs-sm" th:text="'$' + ${subtotal}">$89.00</span>
                                </li>
                                <li class="list-group-item fs-sm text-center text-gray-500">
                                    Shipping cost calculated at Checkout *
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Button -->
                    <a class="btn w-100 btn-dark mb-2" href="/checked">Proceed to Checkout</a>

                    <!-- Link -->
                    <a class="btn btn-link btn-sm px-0 text-body" href="/menu">
                        <i class="fe fe-arrow-left me-2"></i> Continue Shopping
                    </a>

                </div>
            </div>
        </div>
    </section>

    <!-- FEATURES -->
    <section class="bg-light py-9">
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-6 col-lg-3">

                    <!-- Item -->
                    <div class="d-flex mb-6 mb-lg-0">

                        <!-- Icon -->
                        <i class="fe fe-truck fs-lg text-primary"></i>

                        <!-- Body -->
                        <div class="ms-6">

                            <!-- Heading -->
                            <h6 class="heading-xxs mb-1">
                                Free shipping
                            </h6>

                            <!-- Text -->
                            <p class="mb-0 fs-sm text-muted">
                                From all orders over $100
                            </p>

                        </div>

                    </div>

                </div>
                <div class="col-12 col-md-6 col-lg-3">

                    <!-- Item -->
                    <div class="d-flex mb-6 mb-lg-0">

                        <!-- Icon -->
                        <i class="fe fe-repeat fs-lg text-primary"></i>

                        <!-- Body -->
                        <div class="ms-6">

                            <!-- Heading -->
                            <h6 class="mb-1 heading-xxs">
                                Free returns
                            </h6>

                            <!-- Text -->
                            <p class="mb-0 fs-sm text-muted">
                                Return money within 30 days
                            </p>

                        </div>

                    </div>

                </div>
                <div class="col-12 col-md-6 col-lg-3">

                    <!-- Item -->
                    <div class="d-flex mb-6 mb-md-0">

                        <!-- Icon -->
                        <i class="fe fe-lock fs-lg text-primary"></i>

                        <!-- Body -->
                        <div class="ms-6">

                            <!-- Heading -->
                            <h6 class="mb-1 heading-xxs">
                                Secure shopping
                            </h6>

                            <!-- Text -->
                            <p class="mb-0 fs-sm text-muted">
                                You're in safe hands
                            </p>

                        </div>

                    </div>

                </div>
                <div class="col-12 col-md-6 col-lg-3">

                    <!-- Item -->
                    <div class="d-flex">

                        <!-- Icon -->
                        <i class="fe fe-tag fs-lg text-primary"></i>

                        <!-- Body -->
                        <div class="ms-6">

                            <!-- Heading -->
                            <h6 class="mb-1 heading-xxs">
                                Over 10,000 Styles
                            </h6>

                            <!-- Text -->
                            <p class="mb-0 fs-sm text-muted">
                                We have everything you need
                            </p>

                        </div>

                    </div>

                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-7 py-md-9 bg-black">
        <div class="container px-4">
            <div class="row gx-7 justify-content-between">
                <div class="col-sm-4 mt-2">

                    <!-- Heading -->
                    <h5 class="text-xs text-primary">
                        About Us
                    </h5>

                    <!-- Text -->
                    <p class="mb-6">
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Corrupti dolorum, sint corporis
                        nostrum, possimus unde eos vitae eius quasi saepe.
                    </p>

                </div>
                <div class="col-sm-4 mt-2">

                    <!-- Heading -->
                    <h5 class="text-xs text-primary">
                        Contact info
                    </h5>

                    <!-- List -->
                    <ul class="list-unstyled mb-6">
                        <li class="d-flex mb-2">
                            <div class="fas fa-map-marker-alt me-3 mt-2 fs-sm"></div>
                            1234 Vietname Str., Viet Nam, VN 12345-0000
                        </li>
                        <li class="d-flex mb-2">
                            <div class="fas fa-phone me-3 mt-2 fs-sm"></div>
                            +1 987 654 3210
                        </li>
                        <li class="d-flex">
                            <div class="far fa-envelope me-3 mt-2 fs-sm"></div> <a
                                href="mailto:admin@domain.com">admin@domain.com</a>
                        </li>
                    </ul>

                </div>
                <div class="col-sm-3 mt-2">

                    <!-- Heading -->
                    <h5 class="text-xs text-primary">
                        Opening hours
                    </h5>

                    <!-- Text -->
                    <div class="mb-3">
                        <div class="text-xs">Monday - Thursday</div>
                        <div class="font-serif">10:00 AM - 11:00 PM</div>
                    </div>

                    <!-- Text -->
                    <div class="mb-6">
                        <div class="text-xs">Friday - Sunday</div>
                        <div class="font-serif">12:00 AM - 03:00 AM</div>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-12">

                    <!-- Copyright -->
                    <div class="d-flex align-items-center" style="color: #6c757d">
                        <hr class="hr-sm me-3" style="height: 1px;" /> &copy; 2021 TouchÃ©. All rights reserved.
                    </div>

                </div>
            </div>
        </div>
    </footer>


    <!--  -->
    <!-- TOAST -->
    <div class="toast position-fixed bottom-0 start-50 translate-middle-x mb-3 mb-md-5" id="notification" role="alert"
        aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body mx-auto"></div>
        </div>
    </div>

    <!-- MODAL -->
    <div class="offcanvas offcanvas-end" id="modalShoppingCart" tabindex="-1"
         style="visibility: visible; font-family: 'Lato' !important;" aria-modal="true" role="dialog">

        <!-- Full cart (add `.d-none` to disable it) -->
        <div th:if="${listSP} != null">
            <!-- Close -->
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
                <i class="fe fe-x" aria-hidden="true"></i>
            </button>

            <!-- Header-->
            <div class="offcanvas-header lh-fixed fs-lg">
                <strong class="mx-auto">Your Cart (2)</strong>
            </div>

            <!-- List group -->
            <ul class="list-group list-group-lg list-group-flush">
                <li class="list-group-item" th:each="sp : ${listSP}">
                    <div class="row align-items-center">
                        <div class="col-4">

                            <!-- Image -->
                            <a href="./product.html">
                                <img class="img-fluid"
                                     src="#"
                                     th:src="@{../images/} + ${sp.products.category} + '/' + ${sp.products.season} + '/' + ${sp.products.country} + '/' + ${sp.products.image}"
                                     alt="...">
                            </a>

                        </div>
                        <div class="col-8">

                            <!-- Title -->
                            <p class="fs-sm fw-bold mb-6">
                                <a class="text-body" href="./product.html" th:text="${sp.products.name}">Deep fried spring rolls</a> <br>
                                <span class="text-muted" th:text="${sp.products.price}">$40.00</span>
                            </p>

                            <!--Footer -->
                            <div class="d-flex align-items-center">

                                <!-- Select -->
                                <select class="form-select form-select-xxs w-auto">
                                    <option value="1" th:text="${sp.quantity}">1</option>
                                    <!--                                <option value="1">2</option>-->
                                    <!--                                <option value="1">3</option>-->
                                </select>

                                <!-- Remove -->
                                <a class="fs-xs text-gray-400 ms-auto remove-to-cart" href="#" th:data-product-id="${sp.id}">
                                    <i class="fe fe-x"></i> Remove
                                </a>

                            </div>

                        </div>
                    </div>
                </li>
            </ul>

            <!-- Footer -->
            <div class="offcanvas-footer justify-between lh-fixed fs-sm bg-light">
                <strong>Subtotal</strong> <strong class="ms-auto">$89.00</strong>
            </div>

            <!-- Buttons -->
            <div class="offcanvas-body">
                <a class="btn w-100 btn-dark" href="./checkout.html">Continue to Checkout</a>
                <a class="btn w-100 btn-outline-dark mt-2" href="/shopping-cart">View Cart</a>
            </div>
        </div>

        <!-- Empty cart (remove `.d-none` to enable it) -->
        <div class="" th:if="${listSP} == null">

            <!-- Close -->
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
                <i class="fe fe-x" aria-hidden="true"></i>
            </button>

            <!-- Header-->
            <div class="offcanvas-header lh-fixed fs-lg">
                <strong class="mx-auto">Your Cart (0)</strong>
            </div>

            <!-- Body -->
            <div class="offcanvas-body flex-grow-0 my-auto">

                <!-- Heading -->
                <h6 class="mb-7 text-center">Your cart is empty ðŸ˜ž</h6>

                <!-- Buttons -->
                <div class="offcanvas-body">
                    <a class="btn w-100 btn-dark" href="/shopping-cart">View Cart</a>
                    <a class="btn w-100 btn-outline-dark mt-2" href="/menu">Continue Shopping</a>
                </div>

            </div>

        </div>

    </div>

    <!-- JAVASCRIPT -->
    <!-- Vendor JS -->
    <script src="../JS/cart_vendor.js"></script>

    <!-- Theme JS -->
    <script src="../JS/cart_theme.js"></script>

    <!--  JQuery  -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script>
        window.addEventListener('scroll', function () {
            var scrollPosition = window.scrollY;

            var navbar = document.querySelector('.navbar');

            var scrollThreshold = 20;

            if (scrollPosition > scrollThreshold) {
                navbar.classList.add('navbar-light');
                navbar.classList.remove('navbar-dark');
            } else {
                navbar.classList.remove('navbar-light');
                navbar.classList.add('navbar-dark');
            }
        });
    </script>

    <script sec:authorize="isAuthenticated()">
        $(".remove-to-cart").click(function(event) {
            console.log("zo");
            event.preventDefault();

            var productId = $(this).data('product-id');
            console.log(productId);

            $.ajax({
                type: "POST",
                url: "/remove-to-cart",
                contentType: "application/json", // Set the content type to JSON
                data: JSON.stringify(productId), // Convert data to JSON string
                success: function(response) {
                    if (response.status === "success") {
                        // Handle success - update the cart display on the website
                        // Example: Add the product to the cart list
                    } else {
                        // Handle error if any
                    }
                },
                error: function() {
                    // Handle error if any
                }
            });
        });
    </script>
</body>

</html>